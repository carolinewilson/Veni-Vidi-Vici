"use strict";function Router(t,e){t.state("register",{url:"/register",templateUrl:"/templates/register.html",controller:"RegisterController as register"}).state("login",{url:"/login",templateUrl:"/templates/login.html",controller:"LoginController as login"}).state("budgetPlanner",{url:"/locations/:id/budget",templateUrl:"/templates/budgetPlanner.html",controller:"BudgetPlannerController as budgetPlanner"}),e.otherwise("/")}function Auth(t){t.loginUrl="/login",t.signupUrl="/register",t.tokenPrefix=""}function RegisterController(t,e){function r(){t.signup(o.user).then(function(){e.go("home")})}var o=this;o.user={},o.submit=r}function LoginController(t,e){function r(){console.log("login"),t.login(o.credentials).then(function(){e.go("home")})}var o=this;o.credentials={},o.submit=r}function BudgetPlannerController(t,e,r){function o(){l.tempTrip.startDate=l.budget.startDate,l.tempTrip.startAirport=l.budget.startAirport,l.tempTrip.endAirport=l.budget.endAirport,l.tempTrip.duration=l.budget.duration,l.tempTrip.flightCost=500,l.budget.flightCost=l.tempTrip.flightCost,l.budget.totalCost=l.tempTrip.flightCost,l.tempTrip.totalCost=l.tempTrip.flightCost,n()}function n(){var t="http://partners.api.skyscanner.net/apiservices/browsequotes/v1.0/UK/GBP/en-GB/"+l.tempTrip.startAirport+"/"+l.tempTrip.endAirport+"/2017-01-01/2017-01-08?apiKey=da458996433134676343179434984723";r({method:"GET",url:t,headers:{"Access-Control-Allow-Origin":"http://localhost:8000",Accept:"application/json"}}).then(function(t){console.log(t)},function(t){console.log(t)})}function i(){l.tempTrip.startDate=l.budget.startDate,l.tempTrip.startAirport=l.budget.startAirport,l.tempTrip.endAirport=l.budget.endAirport,l.tempTrip.duration=l.budget.duration,l.tempTrip.flightCost=l.budget.flightCost,l.tempTrip.expenses=l.budget.expenses,l.tempTrip.accomCost=l.budget.accom,l.tempTrip.totalSavings=l.budget.totalSavings,l.tempTrip.totalCost=l.tempTrip.flightCost+l.budget.expenses*l.budget.duration+l.budget.accom-l.budget.totalSavings,console.log(l.tempTrip)}var l=this;l.location=t.get(e.params),l.budget={},l.tempTrip={location:l.location,startDate:"2017-01-01",startAirport:"LGW",endAirport:"LAX",duration:1,accomCost:0,expenses:0,totalSavings:0,totalCost:0},l.budget.startDate=l.tempTrip.startDate,l.budget.startAirport=l.tempTrip.startAirport,l.budget.endAirport=l.tempTrip.endAirport,l.budget.duration=l.tempTrip.duration,l.budget.accomCost=l.tempTrip.accomCost,l.budget.expenses=l.tempTrip.expenses,l.budget.totalSavings=l.tempTrip.totalSavings,l.budget.totalCost=l.tempTrip.flightCost+l.budget.expenses+l.budget.accom,l.create=i,l.getFlights=o,console.log(l.budget)}function Location(t){return new t("/locations/:id",{id:"@_id"},{update:{method:"PUT"}})}function MainController(t,e){function r(){t.logout().then(function(){e.go("login")})}var o=this;o.isLoggedIn=t.isAuthenticated,o.logout=r}angular.module("travelApp",["ngResource","ui.router","satellizer"]).config(Router).config(Auth),Router.$inject=["$stateProvider","$urlRouterProvider"],Auth.$inject=["$authProvider"],angular.module("travelApp").controller("RegisterController",RegisterController).controller("LoginController",LoginController),RegisterController.$inject=["$auth","$state"],LoginController.$inject=["$auth","$state"],angular.module("travelApp").controller("BudgetPlannerController",BudgetPlannerController),BudgetPlannerController.$inject=["Location","$state","$http"],angular.module("travelApp").factory("Location",Location),Location.$inject=["$resource"],angular.module("travelApp").controller("MainController",MainController),MainController.$inject=["$auth","$state"];
//# sourceMappingURL=app.js.map
